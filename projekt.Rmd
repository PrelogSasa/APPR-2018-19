---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Saša Prelog"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Izbrala sem si temo analiza odlaganja odpadkov v Sloveniji

V svojem projektu si bom ogledala odlaganje odpadkov in ravnanje z njimi skozi leta v Sloveniji. Primerjala bom statistične regije po količini odpadkov, ki jih proizvedejo posamezniki, primerjala jih bom tudi po količini odpadkov na prebivalca. Poskusila bom poiskati povezave med starostjo in izobraženostjo prebivalcev ter količino odpadkov, ki jih proizvedejo. Rada bi našla tudi povezave med vlaganjem regij v varovanje okolja in količino proizvedenih odpadkov, ter količino ločenih odpadkov.

Moj cilj je prikazati, da večja izobraženost in vlaganje v varovanje okolja spreminjajo, kako ravnamo z odpadki.



# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE, warning=FALSE}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Uvozila sem podatke o odlaganju odpadkov v sloveniji v obliki CSV s statističnega urada. Podatke imam v sedmih razpredelnicah v obliki *tidy data*.

1. 'vrsta.odpadkov' - Nastale količine komunalnih odpadkov (v celi Sloveniji) glede na vrsto odpadkov:
  - 'vrsta_odpadkov' [character] pove nam vrsto odpadkov (npr. papir, embalaža itd.)
  - 'leto' [factor] 
  - 'tone' [numeric] koliko ton odpadkov je nastalo
  
2. 'predelava.odpadkov' - Količina komunalnih odpadkov glede na način predelave: 
  - 'nacin_predelave' [character] pove nam kateri način predelave odpadkov opazujemo
  - 'leto' [factor]
  - 'tone' [numeric] koliko ton odpadkov je bilo predelanih (na nek način)

3. 'nastali.odpadki.regije' - Količina nastalih odpadkov v tonah po regijah: 
  - 'regije' [character] katero regijo opazujemo
  - 'leto' [factor]
  - 'tone'[numeric] koliko ton odpadkov je nastalo

4. 'loceni.odpadki.regije' - Procent (od nastalih) ločeno zbranih odpadkov po regijah:
  - 'regije' [character] katero regijo opazujemo
  - 'leto' [factor]
  - 'delez' [numeric] procent odpadkov, ki so bili zbrani ločeno

5. 'investicije.regije' - Investicije v boljše ravnanje z odpadki po regijah:
  - 'regije' [character] katero regijo opazujemo
  - 'leto' [factor]
  - '1000_EUR' [numeric] investicije v boljše ravnanje z odpadki v 1000 EUR
  - 'delez_regionalnega_BDP' [numeric] investicije v boljše ravnanje z odpadki kot procent regionalnega BDP

6. 'izobrazba.regije' - Izobrazba prebivalcev po regijah (iz leta 2002): 
  - 'regije' [character] katero regijo opazujemo
  - 'osnovnosolska' [numeric] število prebivalcev z osnovnošolsko stopnjo izobrazbe
  - 'srednja_izobrazba' [numeric] število prebivalcev z srednjo stopnjo izobrazbe
  - 'visja_izobrazba' [numeric] število prebivalcev z višjo stopnjo izobrazbe

7. 'starostne.skupine.regije' - Starostne skupine po regijah: 
  - 'regije' [character] katero regijo opazujemo
  - 'leto' [factor]
  - '0-14' [numeric] število ljudi v starostni skupini 0 do 14 let
  - '15-64' [numeric] število ljudi v starostni skupini 15 do 64 let
  - '65+' [numeric] število ljudi v starostni skupini 65 let in več

Vir podatkov: [SURS](https://pxweb.stat.si/pxweb/Database/Okolje/Okolje.asp)

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Najprej sem si ogledala stanje skozi leta za celo Slovenijo. Videti je da vedno več ločujemo - najhitreje se je stanje spreminjalo med letoma 2007 in 2012, v zadnjih nekaj letih pa se je rest nekoliko ustavila. Najbolj se je povečala količina ločene embalaže.

```{r graf_locevanje_skozi_leta, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
graf.locevanje.skozi.leta + xlab("Leto") + ylab("Tone zbranih odpadkov") + ggtitle("Graf ločenih odpadkov po vrstah") + labs(color="Vrsta odpadkov")

```

Na podatkih iz let 2002 za stopnjo izobraženosti po regijah sem si ogledala, ali obstaja kakšna povezava med izobraženostjo in stopnjo ločevanja odpadkov. Iz grafa je razvidno, da se takšne povezave ne da najti;

```{r graf_izobrazba_locevanje, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
graf.izobazba.in.locevanje + xlab("Delež prebivalstva z določeno stopnjo izobrazbe") + ylab("Delež ločenih odpadkov (od nastalih) v %") + ggtitle("Graf povezave med izobraženostjo in ločevanjem odpadkov v letu 2002") + labs(color="Stopnja izobrazbe")

```

Naslednja dva grafa kažeta povezavo med starostjo prebivalstva in stopnjo ločevanja odpadkov. Na prvi pogled bi si mislili, da večji kot je delež odraslih v populaciji oz. regiji, manjša je stopnja ločevanja, in obratno, večji kot je delež starejšega prebivalstva, večja je stopnja ločevanja. Ko pa dodamo obarvanost točk po letih, opazimo, da v resnici vidimo povezavo med leti in stopnjo ločevanja odpadkov. Z leti se je namreč prebivalstvo staralo, torej se je povsod zmanjšal delež odraslih in povečal delež starejših, medtem ko je skozi leta stopnja ločevanja povsod naraščala. Ko sem se omejila samo na eno leto, ni graf pokazal nobene povezave med starostjo in stopnjo ločevanja.

```{r graf_starost_locevanje_odrasli, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
graf.starost.in.locevanje.odrasli + xlab("Delež odraslih") + ylab("Delež ločenih odpadkov (od nastalih) v %") + ggtitle("Graf povezave med starostjo prebivalstva in ločevanjem odpadkov za odrasle") + labs(color="Leto")

```
```{r graf_starost_locevanje_starejsi, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center',}
graf.starost.in.locevanje.starejsi + xlab("Delež starejših") + ylab("Delež ločenih odpadkov (od nastalih) v %") + ggtitle("Graf povezave med starostjo prebivalstva in ločevanjem odpadkov za starejše") + labs(color="Leto")

```

Zadala sem si pokazati tudi povezavo med vlaganjem v boljše ravnanje z odpadki in dejanskim deležem ločeih odpadkov. Iz naslednje tabele lahko kljub zelo razpršenim podatkom vidimo rahlo povezavo med deležem regionalnega BDP namenjenega za boljše ravnanje z odpadki in deležem ločenih odpadkov, predvsem pri višjih procentih regionalnega BDP namenjenega ravnanju z odpadki.

```{r graf_investicije_locevanje, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center',}
graf.investicije.in.locevanje + xlab("Delež regionalnega BDP namenjenega za boljše ravnanje z odpadki v %") + ylab("Delež ločenih odpadkov (od nastalih) v %") + ggtitle("Graf povezave med investiranjem v boljše ravnanje z odpadki in ločevanjem odpadkov") + scale_color_discrete(name="Regije", labels=c("Gorenjska", "Goriška", "Jugovzhodna Slovenija", "Koroška", "Obalno-kraška", "Osrednjeslovenska", "Podravska", "Pomurska", "Posavska", "Primorsko-notranjska", "Savinjska", "Zasavska"))

```

Veliko bolj nazorno pa vidimo povezavo na naslednjem grafu, ki prikazuje podatke samo za Savinjsko regijo, ki ima kar nekaj visokih odstotkov vlaganja v okolje. Točke na grafu sem povezala s potjo ki gre povrsti od leta 2002 do leta 2016, da vidimo kako so si točke sledile kronološko. Vsakič, ko Savinjska veliko vloži v okolje, naslednje leto vidimo višji odstotek ločenih odpadkov, ko pa je zadnji dve leti bistveno manj vložla v boljše ravnanje z odpadki kot prejšnja leta, se odstotek ločenih odpadkov nekoliko zmanjša.

```{r graf_investicije_locevanje_savinjska, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center',}
graf.investicije.in.locevanje.savinjska + xlab("Delež regionalnega BDP namenjenega za boljše ravnanje z odpadki v %") + ylab("Delež ločenih odpadkov (od nastalih) v %") + ggtitle("Graf povezave med investiranjem v boljše ravnanje z odpadki in ločevanjem odpadkov za Savinjsko regijo")

```


(Najprej bi si rada pogledala katera regija proizvede največ odpadkov na prebivalca in katera največ ločuje, ter si ogledala ali se to spreminja s časom.
 povezavo med investiranjem v boljše ravnanje z odpadki  in procentom ločeno zbranih odpadkov (primerjava glede na regije ali pa morda ena regija v času).)

# Napredna analiza podatkov


